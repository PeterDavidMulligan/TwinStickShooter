////////////////////////////////////////////////////////////
///	Author: Peter Mulligan
///	Date: 14/03/16
///	Last Edit: 20/03/16
////////////////////////////////////////////////////////////
#ifndef TESTSCREEN_HEADER
#define TESTSCREEN_HEADER

////////////////////////////////////////////////////////////
// Headers
////////////////////////////////////////////////////////////
#include "Gamepad.h"
#include "Screen.h"
#include "TwinStickShooter\TextureManager.h"
#include "TwinStickShooter\SoundManager.h"
#include "TwinStickShooter\FontManager.h"
#include "Thor\Particles.hpp"

////////////////////////////////////////////////////////////
///	\brief Screen subclass for running tests
///
////////////////////////////////////////////////////////////
namespace goo
{
	class TestScreen : public goo::Screen
	{
	private:
		////////////////////////////////////////////////////////////
		// Member Variables
		////////////////////////////////////////////////////////////
		thor::ParticleSystem m_particleSystem;
		thor::UniversalEmitter m_particleEmitter;
		sf::Sprite m_playerSprite;
		sf::Vector2f m_velocity;
		float m_speed = 5.0;
		float m_rotationSpeed = m_speed * 150;
		float m_heading = 0;

		////////////////////////////////////////////////////////////
		// Private Functions
		////////////////////////////////////////////////////////////
		void setFacing(const sf::Vector2f target);
		void rotateToHeading(sf::Time elapsedTime);
	public:
		////////////////////////////////////////////////////////////
		// Constructor
		////////////////////////////////////////////////////////////
		TestScreen(sf::RenderWindow& window, goo::TextureManager& textures,
			goo::SoundManager& sounds, goo::FontManager& fonts);

		////////////////////////////////////////////////////////////
		// Public Functions
		////////////////////////////////////////////////////////////
		void initialise();
		void input(sf::Event e, int* currentScreen);
		void update(sf::Time elapsedTime);
		void draw();
	};
}
#endif
////////////////////////////////////////////////////////////
///	\class goo::TestScreen
///
/// Subclass of Screen. This is just a Screen for testing
/// and displaying works in progress
///
////////////////////////////////////////////////////////////